"use strict";(self.webpackChunklukso_docs=self.webpackChunklukso_docs||[]).push([[9342],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),p=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=p(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=p(a),u=r,m=h["".concat(c,".").concat(u)]||h[u]||d[u]||o;return a?n.createElement(m,i(i({ref:t},l),{},{components:a})):n.createElement(m,i({ref:t},l))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},3018:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={sidebar_label:"LSP0 - ERC725 Account",sidebar_position:2},i="LSP0 - ERC725 Account",s={unversionedId:"standards/universal-profile/lsp0-erc725account",id:"standards/universal-profile/lsp0-erc725account",title:"LSP0 - ERC725 Account",description:"LSP0 - ERC725Account",source:"@site/docs/standards/universal-profile/lsp0-erc725account.md",sourceDirName:"standards/universal-profile",slug:"/standards/universal-profile/lsp0-erc725account",permalink:"/standards/universal-profile/lsp0-erc725account",draft:!1,editUrl:"https://github.com/lukso-network/docs/tree/main/docs/standards/universal-profile/lsp0-erc725account.md",tags:[],version:"current",lastUpdatedAt:1684836583,formattedLastUpdatedAt:"May 23, 2023",sidebarPosition:2,frontMatter:{sidebar_label:"LSP0 - ERC725 Account",sidebar_position:2},sidebar:"standardsSidebar",previous:{title:"Introduction",permalink:"/standards/universal-profile/introduction"},next:{title:"LSP3 - Universal Profile Metadata",permalink:"/standards/universal-profile/lsp3-universal-profile-metadata"}},c={},p=[{value:"Introduction",id:"introduction",level:2},{value:"What does this standard represent ?",id:"what-does-this-standard-represent-",level:2},{value:"ERC725X - Generic Executor",id:"erc725x---generic-executor",level:3},{value:"Operation 0 - CALL",id:"operation-0---call",level:4},{value:"Operation 1 - CREATE",id:"operation-1---create",level:4},{value:"Operation 2 - CREATE2",id:"operation-2---create2",level:4},{value:"Operation 3 - STATICCALL",id:"operation-3---staticcall",level:4},{value:"Operation 4 - DELEGATECALL",id:"operation-4---delegatecall",level:4},{value:"ERC725Y - Generic Key-Value Store",id:"erc725y---generic-key-value-store",level:3},{value:"ERC1271",id:"erc1271",level:3},{value:"LSP1 - UniversalReceiver",id:"lsp1---universalreceiver",level:3},{value:"LSP14 - Ownable2Step",id:"lsp14---ownable2step",level:3},{value:"Initiate the transfer",id:"initiate-the-transfer",level:4},{value:"Accept ownership",id:"accept-ownership",level:4},{value:"Transfer Finalized",id:"transfer-finalized",level:4},{value:"LSP17 - Contract Extension",id:"lsp17---contract-extension",level:3},{value:"Support New Functions",id:"support-new-functions",level:4},{value:"Support New Standards",id:"support-new-standards",level:4},{value:"LSP20 - Call Verification",id:"lsp20---call-verification",level:3}],l={toc:p};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lsp0---erc725-account"},"LSP0 - ERC725 Account"),(0,r.kt)("admonition",{title:"Standard Document",type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-0-ERC725Account.md"},"LSP0 - ERC725Account"))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://ethereum.org/en/developers/docs/accounts/#externally-owned-accounts-and-key-pairs"},"Externally Owned Accounts (EOAs)")," are the primary type of ",(0,r.kt)("strong",{parentName:"p"},"account")," in Ethereum, controlled by a private key. If the private key is ",(0,r.kt)("strong",{parentName:"p"},"compromised"),", anyone can execute transactions from the account and access any assets it holds. EOAs have no built-in mechanism for attaching any information or data, making identifying the person or entity using the account challenging. They can only perform simple interactions using the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://www.evm.codes/#f1"},"CALL"))," opcode and create contracts using the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://www.evm.codes/#f0"},"CREATE"))," opcode."),(0,r.kt)("p",null,"These issues can be addressed by the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/lsp-background/erc725"},"ERC725"))," standard, which provides more operations to execute and a flexible way to attach data for the contract even after it has been deployed."),(0,r.kt)("p",null,"However, for a smart contract-based account to be viable in the long term, it should have much more functionalities than the ability to execute and to attach data. The features that makes a smart contract an account are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"the ability to ",(0,r.kt)("strong",{parentName:"li"},"verify signed messages")),(0,r.kt)("li",{parentName:"ul"},"be ",(0,r.kt)("strong",{parentName:"li"},"notified of incoming tokens"),", followers, and other types of transactions,"),(0,r.kt)("li",{parentName:"ul"},"be able to be ",(0,r.kt)("strong",{parentName:"li"},"extended after deployment")," to support functions and standards that will be adopted in the future.")),(0,r.kt)("p",null,"Additionally, it should have a ",(0,r.kt)("strong",{parentName:"p"},"secure ownership management")," system to ensure the protection of valuable assets."),(0,r.kt)("h2",{id:"what-does-this-standard-represent-"},"What does this standard represent ?"),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"ERC725Account")," is a blockchain account system that can be utilized by individuals, machines, or other smart contracts. It is made up of various standards that enable the functionalities mentioned above. It is formed from:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-165"},"ERC165"))," allows to register and detect the standard interfaces and standards that the contract implements, or will implement in the future.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/lsp-background/erc725#erc725x---generic-executor"},"ERC725X"))," is a generic executor that enables calling external contracts with different operations such as ",(0,r.kt)("a",{parentName:"p",href:"https://www.evm.codes/#f1"},(0,r.kt)("strong",{parentName:"a"},"CALL")),", ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-214"},(0,r.kt)("strong",{parentName:"a"},"STATICCALL"))," and ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-7"},(0,r.kt)("strong",{parentName:"a"},"DELEGATECALL")),". It also allows deploying new contracts with ",(0,r.kt)("a",{parentName:"p",href:"https://www.evm.codes/#f0"},(0,r.kt)("strong",{parentName:"a"},"CREATE"))," or ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1014"},(0,r.kt)("strong",{parentName:"a"},"CREATE2")),", or transferring value to any address (EOA or smart contracts).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/lsp-background/erc725#erc725y---generic-data-keyvalue-store"},"ERC725Y"))," is a generic key-value store that enables it to ",(0,r.kt)("strong",{parentName:"p"},"attach any information")," to the smart contract even after it's been deployed.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-1271"},"ERC1271"))," helps to ",(0,r.kt)("strong",{parentName:"p"},"verify the validity")," of a message and signature.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp1-universal-receiver"},"LSP1-UniversalReceiver"))," enables ",(0,r.kt)("strong",{parentName:"p"},"notifications about incoming or outgoing transactions")," and adds custom handling and behavior based on these transactions.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp14-ownable-2-step"},"LSP14-Ownable2Step"))," enables a ",(0,r.kt)("strong",{parentName:"p"},"secure ownership management")," system.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp17-contract-extension"},"LSP17-ContractExtension"))," enables the contract to be ",(0,r.kt)("strong",{parentName:"p"},"extended after deployment")," to support new standard and functionalities.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"#"},"LSP20-CallVerification"))," provides a unified and standard way for all addresses to ",(0,r.kt)("strong",{parentName:"p"},"interact directly with the account"),". This streamlines the interaction process considering the ownership setup, and enhancing accessibility and developer experience."))),(0,r.kt)("h3",{id:"erc725x---generic-executor"},"ERC725X - Generic Executor"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/lsp-background/erc725"},"ERC725"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#execute"},(0,r.kt)("strong",{parentName:"a"},"execute functions"))," provided by ",(0,r.kt)("strong",{parentName:"p"},"ERC725X")," that allows the contract to execute multiple operations."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("strong",{parentName:"p"},"javascript")," guides to know ",(0,r.kt)("a",{parentName:"p",href:"/guides/universal-profile/transfer-lyx"},(0,r.kt)("strong",{parentName:"a"},"How to Send native tokens"))," or ",(0,r.kt)("a",{parentName:"p",href:"/guides/universal-profile/interact-with-contracts"},(0,r.kt)("strong",{parentName:"a"},"How to Call other contract's function"))," using the execute function.")),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"ERC725X")," standard enables the account to perform generic calls on other smart contracts, including transferring native tokens. External actions can be executed using the smart contract's generic ",(0,r.kt)("inlineCode",{parentName:"p"},"execute(...)")," function and multi-calls can be done with the ",(0,r.kt)("inlineCode",{parentName:"p"},"execute(..)")," ",(0,r.kt)("strong",{parentName:"p"},"batch")," function, but only the account owner can perform these operations."),(0,r.kt)("p",null,"Additionally, it also allows for the deployment of new smart contracts by providing the bytecode of the new contract to deploy as an argument to the ",(0,r.kt)("inlineCode",{parentName:"p"},"execute(...)")," function. Contracts can be deployed using either the ",(0,r.kt)("strong",{parentName:"p"},"CREATE")," or ",(0,r.kt)("strong",{parentName:"p"},"CREATE2")," opcodes."),(0,r.kt)("p",null,"The following types of calls (operation types) are available:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"Operation number"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Operation type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"0"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"https://www.evm.codes/#f1"},(0,r.kt)("inlineCode",{parentName:"a"},"CALL"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Transfer native tokens or calls smart contract functions.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"1"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"https://www.evm.codes/#f0"},(0,r.kt)("inlineCode",{parentName:"a"},"CREATE"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Create a new smart contract based on the contract address and nonce.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"2"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"https://eips.ethereum.org/EIPS/eip-1014"},(0,r.kt)("inlineCode",{parentName:"a"},"CREATE2"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Create a new smart contract based on the contract address, bytecode and the salt. The address can be predetermined.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"https://eips.ethereum.org/EIPS/eip-214"},(0,r.kt)("inlineCode",{parentName:"a"},"STATICCALL"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Calls another smart contract while disallowing any modification to the state during the call.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"4"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"https://eips.ethereum.org/EIPS/eip-7"},(0,r.kt)("inlineCode",{parentName:"a"},"DELEGATECALL"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Runs the function from another contract, but use the context of the current contract.")))),(0,r.kt)("h4",{id:"operation-0---call"},"Operation 0 - CALL"),(0,r.kt)("h1",{id:"erc725x-operation-type-call"},(0,r.kt)("img",{alt:"ERC725X operation type CALL",src:a(9577).Z,width:"1797",height:"556"})),(0,r.kt)("h4",{id:"operation-1---create"},"Operation 1 - CREATE"),(0,r.kt)("h1",{id:"erc725x-operation-type-create"},(0,r.kt)("img",{alt:"ERC725X operation type CREATE",src:a(6744).Z,width:"1794",height:"557"})),(0,r.kt)("h4",{id:"operation-2---create2"},"Operation 2 - CREATE2"),(0,r.kt)("h1",{id:"erc725x-operation-type-create2"},(0,r.kt)("img",{alt:"ERC725X operation type CREATE2",src:a(8490).Z,width:"1760",height:"568"})),(0,r.kt)("h4",{id:"operation-3---staticcall"},"Operation 3 - STATICCALL"),(0,r.kt)("h1",{id:"erc725x-operation-type-staticcall"},(0,r.kt)("img",{alt:"ERC725X operation type STATICCALL",src:a(5499).Z,width:"1810",height:"552"})),(0,r.kt)("h4",{id:"operation-4---delegatecall"},"Operation 4 - DELEGATECALL"),(0,r.kt)("h1",{id:"erc725x-operation-type-delegatecall"},(0,r.kt)("img",{alt:"ERC725X operation type DELEGATECALL",src:a(2074).Z,width:"1873",height:"533"})),(0,r.kt)("h3",{id:"erc725y---generic-key-value-store"},"ERC725Y - Generic Key-Value Store"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/lsp-background/erc725"},"ERC725"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#setdata"},(0,r.kt)("strong",{parentName:"a"},"setData functions"))," provided by ",(0,r.kt)("strong",{parentName:"p"},"ERC725Y")," that allows attaching data to the contract."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("strong",{parentName:"p"},"javascript")," guides to know ",(0,r.kt)("a",{parentName:"p",href:"/guides/universal-profile/edit-profile"},(0,r.kt)("strong",{parentName:"a"},"How to Edit a Profile (setData)"))," or ",(0,r.kt)("a",{parentName:"p",href:"/guides/universal-profile/read-profile-data"},(0,r.kt)("strong",{parentName:"a"},"How to Read from a Profile (getData)")),".")),(0,r.kt)("p",null,"Once a smart contract is deployed with a specific set of variables containing data, it cannot be modified to include new variables. This can be a problem for smart contract based accounts that need to store more and more data in the future."),(0,r.kt)("p",null,"ERC725Y standardizes a mapping of data keys to data values to store data dynamically, and to have the ability to add or remove data across time without the need of redeploying the contract. It gives flexibility to the contract storage."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Data Keys")," are represented as ",(0,r.kt)("inlineCode",{parentName:"li"},"bytes32")," values."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Data Values")," under these keys are stored as ",(0,r.kt)("inlineCode",{parentName:"li"},"bytes"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ERC725Y key-value store vs standard contract storage",src:a(7762).Z,width:"1431",height:"698"})),(0,r.kt)("p",null,"Developers can access the data stored in the contract via data keys instead of referencing the storage slot where the data resides."),(0,r.kt)("p",null,"Thanks to ERC725Y, contracts become more interoperable, as their storage is represented in the same way. Contracts and interfaces can then read and write data from or to the storage in the same manner via the functions ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#getdata"},(0,r.kt)("inlineCode",{parentName:"a"},"getData(...)"))," and ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#setdata"},(0,r.kt)("inlineCode",{parentName:"a"},"setData(...)")),"."),(0,r.kt)("h3",{id:"erc1271"},"ERC1271"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://eips.ethereum.org/EIPS/eip-1271"},"ERC1271"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#isvalidsignature"},(0,r.kt)("strong",{parentName:"a"},"isValidSignature"))," function documentation.")),(0,r.kt)("p",null,"Unlike Externally Owned Accounts (EOAs), ",(0,r.kt)("strong",{parentName:"p"},"smart contracts cannot sign messages")," since they do not have private keys. This standard defines a way for contracts to verify if a signature and a message provided are valid according to the contract's logic. There will be many contracts that want to utilize signed messages to validate rights-to-move assets or other purposes."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"LSP0-ERC725Account")," implements the ",(0,r.kt)("strong",{parentName:"p"},"ERC1271")," standard in a flexible way that allows for future upgradeability when different type of owners are set."),(0,r.kt)("p",null,"When the owner of the account is an EOA, the ",(0,r.kt)("strong",{parentName:"p"},"ECDSA algorithm")," is used to recover the address of the signer from the provided signature and message, and the function ",(0,r.kt)("inlineCode",{parentName:"p"},"isValidSignature(..)")," will return ",(0,r.kt)("strong",{parentName:"p"},"valid")," if the recovered signer address matches the address of the owner."),(0,r.kt)("p",null,"When the owner is a smart contract, the ",(0,r.kt)("inlineCode",{parentName:"p"},"isValidSignature(..)")," function will be called on the owner and return whether the signature and the message are ",(0,r.kt)("strong",{parentName:"p"},"valid")," according to the logic in ",(0,r.kt)("inlineCode",{parentName:"p"},"isValidSignature(..)")," on the owner contract."),(0,r.kt)("h3",{id:"lsp1---universalreceiver"},"LSP1 - UniversalReceiver"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp1-universal-receiver"},"LSP1-UniversalReceiver"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#universalreceiver"},(0,r.kt)("strong",{parentName:"a"},"universalReceiver functions"))," provided by ",(0,r.kt)("strong",{parentName:"p"},"LSP1")," that allows notifying about incoming/ outgoing transactions."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("strong",{parentName:"p"},"javascript")," guides to know ",(0,r.kt)("a",{parentName:"p",href:"/guides/universal-receiver-delegate/set-default-implementation"},(0,r.kt)("strong",{parentName:"a"},"How to set a UniversalReceiverDelegate built by LUKSO"))," or ",(0,r.kt)("a",{parentName:"p",href:"/guides/universal-receiver-delegate/accept-reject-assets"},(0,r.kt)("strong",{parentName:"a"},"How to set your own UniversalReceiverDelegate")),".")),(0,r.kt)("p",null,"This standard enables the account to be notified of incoming transactions such as token transfer, vault transfer, information transfer, etc. Notifications are handy for situations where users want to customize how their account contract reacts to certain tokens by either rejecting them or operating a specific call on each token received."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"#"},"LSP0-ERC725Account"))," implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," function that:"),(0,r.kt)("p",null,"Emits an ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#universalreceiver-1"},(0,r.kt)("inlineCode",{parentName:"a"},"UniversalReceiver"))," event with the ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),", as well as additional parameters such as the amount sent to the function, the caller of the function, and the return value of the delegate contracts."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId")," is a ",(0,r.kt)("strong",{parentName:"p"},"bytes32")," value that represents the type of action being notified about. For instance, if you want to notify an account about a specific type of token, you could hash the word ",(0,r.kt)("strong",{parentName:"p"},'"TOKENXX"')," which would result in a ",(0,r.kt)("inlineCode",{parentName:"p"},"bytes32"),", and then use it as a ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId"),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," field can contain relevant information related to the ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId")," used when the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," function was called. In the case of token transfers, it could be any encoded information such as the recipient balance, time, royalties, etc."),(0,r.kt)("p",null,"The typeId provides a unique identifier for the type of notification, while the data field provides the specific information related to the notification. This allows for efficient and effective communication of information related to the token, without the need for extensive parsing or decoding of data."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(...)")," function and its ",(0,r.kt)("inlineCode",{parentName:"p"},"UniversalReceiver")," event are the mechanisms through which an ",(0,r.kt)("strong",{parentName:"p"},"LSP0-ERC725Account")," can receive notifications. Websites can monitor and listen to the event and previous events to understand what the account has been notified about."),(0,r.kt)("h1",{id:"lsp0-being-notified"},(0,r.kt)("img",{alt:"LSP0 being notified",src:a(4342).Z,width:"1365",height:"732"})),(0,r.kt)("p",null,"This innovation is particularly beneficial for all type of contracts that have a connection with the account, especially token standards, as it streamlines the blockchain user experience by allowing the recipient of a token to be notified directly."),(0,r.kt)("p",null,"Currently, determining which tokens an address owns requires going through all events of all token contracts on the blockchain network and filtering out the tokens that the address owns based on the events of those contracts."),(0,r.kt)("p",null,"However, with the ",(0,r.kt)("strong",{parentName:"p"},"UniversalReceiver")," event, contracts can call the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," function and emit the event on the account itself. This way, to determine which tokens an account holds, one would simply listen to the UniversalReceiver event emitted on that account. This method is much simpler and more efficient."),(0,r.kt)("h1",{id:"lsp0-being-notified-1"},(0,r.kt)("img",{alt:"LSP0 being notified",src:a(1865).Z,width:"1473",height:"678"})),(0,r.kt)("p",null,"In addition to the ",(0,r.kt)("strong",{parentName:"p"},"UniversalReceiver")," event, the account owner has the ability to set in the storage of the account the addresses of contracts labeled as ",(0,r.kt)("strong",{parentName:"p"},"UniversalReceiverDelegates")," (URD). These contracts can be chosen to run on each call to the ",(0,r.kt)("inlineCode",{parentName:"p"},"universalReceiver(..)")," function or on a specific ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId")," passed to the function."),(0,r.kt)("p",null,"This provides a way to react to calls, not just to be informed. For example, if the account receives any type of token, regardless of the typeId, it could specify in the main ",(0,r.kt)("strong",{parentName:"p"},"UniversalReceiverDelegate")," that the transfer should be automatically reverted."),(0,r.kt)("p",null,"Or, for a specific type of token represented by a specific ",(0,r.kt)("inlineCode",{parentName:"p"},"typeId"),", account could specify in the ",(0,r.kt)("strong",{parentName:"p"},"MappedUniversalReceiverDelegate")," (Mapped to a specific typeId) that the token should be automatically forwarded to a vault that the account own."),(0,r.kt)("h1",{id:"lsp0-reacting"},(0,r.kt)("img",{alt:"LSP0 reacting",src:a(5344).Z,width:"1348",height:"741"})),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"UniversalReceiverDelegate")," contracts ",(0,r.kt)("strong",{parentName:"p"},"provides optional interactions")," that allows the account to go beyond simply being informed and provides a way to actively respond to different types of notifications as they occur."),(0,r.kt)("h3",{id:"lsp14---ownable2step"},"LSP14 - Ownable2Step"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp14-ownable-2-step"},"LSP14 - Ownable2Step"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp14-ownable-2-step"},(0,r.kt)("strong",{parentName:"a"},"LSP14 functions"))," allowing 2 step ownership transfers."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("strong",{parentName:"p"},"javascript")," guides to know ",(0,r.kt)("a",{parentName:"p",href:"/guides/key-manager/upgrade-lsp6"},(0,r.kt)("strong",{parentName:"a"},"How to transferOwnership of a Profile")),".")),(0,r.kt)("p",null,"An account that holds valuable assets and represents your digital identity should be secure to prevent mistakes that may result in losing it. Therefore, a safe and secure ownership management system should be in place for this account."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"LSP14-Ownable2Step")," is a standard that allows for the ownership of an account to be transferred or renounced through a 2-step process, making it more resistant to phishing attacks. This standard allows for any address, such as an EOA or smart contract, to be the owner of the account. The owner can be a ",(0,r.kt)("strong",{parentName:"p"},"voting contract"),", or a ",(0,r.kt)("strong",{parentName:"p"},"multisig"),", or a ",(0,r.kt)("strong",{parentName:"p"},"KeyManager")," that allow for permission-based access control. (Check ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/universal-profile/lsp6-key-manager"},"LSP6-KeyManager")),")"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ERC725Y key-value store vs standard contract storage",src:a(2083).Z,width:"1435",height:"696"})),(0,r.kt)("p",null,"The transfer of ownership is conducted in two stages, where a pending owner is designated and then in another transaction the pending owner must confirm their acceptance of ownership. In the process of ownership transfer, the 2 parties are notified using ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"#lsp1---universalreceiver"},"LSP1-UniversalReceiver"))," standard."),(0,r.kt)("h4",{id:"initiate-the-transfer"},"Initiate the transfer"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ERC725Y key-value store vs standard contract storage",src:a(8960).Z,width:"1699",height:"588"})),(0,r.kt)("h4",{id:"accept-ownership"},"Accept ownership"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ERC725Y key-value store vs standard contract storage",src:a(2067).Z,width:"1637",height:"610"})),(0,r.kt)("h4",{id:"transfer-finalized"},"Transfer Finalized"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ERC725Y key-value store vs standard contract storage",src:a(2941).Z,width:"1701",height:"587"})),(0,r.kt)("p",null,"The process for renouncing ownership follows a similar structure, where an initial call is made, followed by a waiting period and a specific timeframe during which the ownership can be renounced before the process is reset."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Renounce Ownership",src:a(7679).Z,width:"3324",height:"1203"})),(0,r.kt)("h3",{id:"lsp17---contract-extension"},"LSP17 - Contract Extension"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp17-contract-extension"},"LSP17 - ContractExtension"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("a",{parentName:"p",href:"/standards/smart-contracts/lsp0-erc725-account#fallback"},(0,r.kt)("strong",{parentName:"a"},"fallback function"))," that allows calls for the extensions.")),(0,r.kt)("p",null,"Once a smart contract based account is deployed on the blockchain, it is not possible to modify the contract to add new native functions or change the behavior of existing ones. This can be a limitation for these accounts, that may need to support new use cases, functions, and standards that may be adopted in the future."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/generic-standards/lsp17-contract-extension"},"LSP17-ContractExtension"))," defines a mechanism for extending a contract to support new standard and functions through the use of ",(0,r.kt)("strong",{parentName:"p"},"extensions"),"."),(0,r.kt)("h4",{id:"support-new-functions"},"Support New Functions"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"LSP0-ERC725Account")," contains basic functionality for interacting with other addresses, storing and retrieving data, verifying signatures, handling transactions, managing ownership, and checking interface support with the functions listed below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP0 base functions",src:a(2603).Z,width:"1496",height:"668"})),(0,r.kt)("p",null,"To ensure the longevity and continued evolution of the LSP0 as a blockchain account, it is important for it to support new functions that will become standardized in the future. This can be accomplished through the use of extension contracts, which allow the account owner to add new functionality not natively supported by the LSP0."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP0 extended with onERC721Received and validateUserOp functions",src:a(3374).Z,width:"1479",height:"675"})),(0,r.kt)("p",null,"For example, in the figure above, the LSP0 was extended with the ",(0,r.kt)("inlineCode",{parentName:"p"},"onERC721Received(..)")," function which will allow the contract to receive safe ERC721 transfers."),(0,r.kt)("p",null,"By utilizing these extensions, the account can be updated with new features and remain adaptable to changes in the blockchain ecosystem."),(0,r.kt)("h4",{id:"support-new-standards"},"Support New Standards"),(0,r.kt)("p",null,"The ability to add new functions to the LSP0 is crucial for its extendibility post-deployment, but it is also important for the LSP0 to be able to support the new interface IDs of any standards that are added through extensions. Initially, the LSP0 supports a set of interfaces at the time of deployment:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP0 base interfaceIds",src:a(1094).Z,width:"1532",height:"652"})),(0,r.kt)("p",null,"However, the account can declare support for new interface IDs after it has been extended. This is especially beneficial for contracts that check if a contract supports a specific interface ID before interacting with it."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP0 Extended interfaceIds",src:a(769).Z,width:"1485",height:"673"})),(0,r.kt)("h3",{id:"lsp20---call-verification"},"LSP20 - Call Verification"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-20-CallVerification.md"},"LSP20 - CallVerification"))," standard for more information."),(0,r.kt)("p",{parentName:"admonition"},"Check the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/standards/smart-contracts/lsp0-erc725-account"},"LSP0 functions"))," to see how verification of allowed calls to the account happens.")),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"LSP0ERC725Account")," is an ownable contract that can be owned by different types of addresses, including EOAs, contracts like multi-sig wallets, KeyManagers, etc. These owner contracts may have various functions and behaviors, which can create challenges in figuring out how the interaction with the account works."),(0,r.kt)("p",null,"Previously, when a Key Manager owns the account, only addresses allowed by the Key Manager should interact with the account via the Key Manager. However, they cannot directly interact with the account functions because only the Key Manager can call them as the owner. A similar issue arises when a voting contract owns the account, as voters must interact with the voting contract rather than the account directly."),(0,r.kt)("p",null,"To ensure a unified and standard way to interact with the account, the ",(0,r.kt)("strong",{parentName:"p"},"LSP20-CallVerification")," standard was proposed. This standard aims to streamline the interaction with the account, considering the ownership setup."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP0 Old interaction",src:a(8747).Z,width:"2558",height:"1563"})),(0,r.kt)("p",null,"Currently, when the owner calls a function on the account contract, they are allowed to execute it directly. However, if a different address calls a function on the LSP0, the function will forward the call to the account owner for verification. The owner must then determine if the caller is allowed to execute the specific function."),(0,r.kt)("p",null,"If the caller is allowed, the owner should return a specific value. If the caller is not allowed, the owner can either revert the transaction or return an invalid value. This verification process occurs before and possibly after the execution of the function."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"LSP0 Old interaction",src:a(4341).Z,width:"2726",height:"1467"})),(0,r.kt)("p",null,"The primary benefit of this approach is that it ensures a unified way for all addresses to interact directly with the account functions, even if they are not the owner but are allowed by the owner's logic."),(0,r.kt)("p",null,"By implementing the ",(0,r.kt)("strong",{parentName:"p"},"LSP20-CallVerification")," standard, the account becomes more accessible and versatile, accommodating various ownership structures and simplifying the user experience for those interacting with it."))}d.isMDXComponent=!0},1865:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP-Notification-Token-9c9228fb97fca7a8bb9eb631e6e20bf8.jpeg"},9577:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-CALL-dab3c170da840c8b5adf9678610d9a70.jpeg"},6744:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-CREATE-32c1af59668f1922371b5dcbd24c2c36.jpeg"},8490:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-CREATE2-56f6c4c7bd3eb52df55c8bde146c9b46.jpeg"},2074:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-DELEGATECALL-035d3eb6d4671ba5a63f51934c4f4b63.jpeg"},769:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Extended-Interfaces-8e18431a96128cc7e8922191e43a1cf6.jpeg"},3374:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Extended-764cc5e136c6571365ea2ab46193ab69.jpeg"},2603:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Functions-95dd26ab4fc136527a80880f073db02b.jpeg"},4341:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-LSP20Interaction-2e87de03f7468cfedaeb27b18139262e.jpeg"},4342:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Notification-d3e063759b485bfefb57eaa4cd99901a.jpeg"},8747:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-OldInteraction-c576cab699f4665e4f5a5eecd48eeea4.jpeg"},2083:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Owner-74127206f7413b6e6881599bab73cf44.jpeg"},7679:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Renounce-f275d0a82612db5dc5ddf9be320f76bc.jpeg"},5499:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-STATICCALL-dbff292ef23b2a085f3cb1eb9611487f.jpeg"},7762:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Storage-f3126d4d914797b911e911a0a4d6c54f.jpeg"},1094:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-SupportedInterface-b412a1ed437f97262a24ab6bd94fdb92.jpeg"},5344:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Token-Reacting-cc4ff9bb76d9f1c084698c0b1f484425.jpeg"},8960:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Transfer1-fd38e5d16ef20d73410350cf5ce43812.jpeg"},2067:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Transfer2-d413644bb1e00a47f0215eb1224939aa.jpeg"},2941:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/LSP0-Transfer3-11f6f5af8a449ddae1dc549c86696ab1.jpeg"}}]);